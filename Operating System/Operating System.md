# 운영체제

컴퓨터 하드웨어를 잘 관리하여 *성능*을 높이고 사용자에게 *편의성*을 제공하는 컴퓨터 하드웨어 관리 프로그램      
`하드웨어 < 운영체제 (Kernel < Shell) < 애플리케이션`
> **Kernel** : 하드웨어 관리      
  **Shell** : 사용자 명령 해석

**부팅** <br>
컴퓨터 시스템 내부에서 OS 실행
> **1. POST를 실행**       
  컴퓨터 하드웨어 상태 확인 (프로세서 - 메모리(ROM, RAM) - 보조기억장치)     
  **2. Boot loader 실행**      
  보조기억장치에 있는 OS를 RAM으로 옮겨옴       
  컴퓨터가 종료 될 때까지 상주(Resident)한다. 

## 역사

- **1940s 컴퓨터 개발**       
입력장치 - 메모리 - 프로세서 - 출력장치

  \+ 운영체제

- **Batch Processing System (일괄처리)**      
연속되는 과정을 메모리에 저장 -> 운영 과정 단순화       
*Resident Monitor : 최초의 운영체제*

  \+ 보조기억장치

- **Multiprogramming System (다중프로그래밍)**        
느린 하드웨어로 인한 CPU 작업 중지(Idle) -> 메모리에 여러 프로그램       
*CPU scheduling, 메모리 관리 및 보호*

  \+ 모니터, 키보드

- **Time-Sharing System (시공유 시스템)**       
일정시간이 지나면 프로그램 강제 전환 -> 여러 프로그램 동시 수행      
*가상 메모리, 프로세스간 통신, 동기화*       
*Unix, Linux 기반 기술*

  \+ 고등 컴퓨터 구조 
  
- **Multiprocessor OS (다중 프로세서 운영체제)**       
  *Multiprocessor System (다중 프로세서 시스템)*       
  여러 CPU를 병렬 연결한 시스템        
  성능, 가격, 신뢰성에 유리
  
- **Distributed OS (분산 운영체제)**        
  *Distributed System(분산 시스템)*        
  여러 컴퓨터를 연결한 시스템
  
  
- **RTOS = Real-Time OS (실시간 운영체제)**       
  *Real-Time System (실시간 시스템)*        
  일정 시간 내에 작업을 끝내야 하는 시스템
  *군사, 항공, 우주, 공장 자동화에 *
  
# 인터럽트 기반 시스템

다양한 하드웨어를 사용하는 현대 운영체제는 인터럽트 기반으로 운영된다

**인터럽트** : 현재 진행하던 작업을 중지하고 다른 작업 수행

- **하드웨어 인터럽트**       
  인터럽트 발생 시 운영체제 내의 특정 코드 실행 (ISR)     
  Interrupt Service Routine 종료 후 대기       

- **소프트웨어 인터럽트**       
  운영체제 서비스 이용이 필요한 사용자 프로그램이 실행      
  인터럽트 발생 시 운영체제 내의 특정 코드 실행 (ISR)       
  Interrupt Service Routine 종료 후 대기
 
> **운영체제 대기 상태**       
  \- 하드웨어 인터럽트에 의해 ISR 실행      
  \- 소프트웨어 인터럽트에 의해 ISR 실행       
  \- 내부 인터럽트에 의해 ISR 실행       
  **ISR 종료**       
  **원래 대기상태 또는 사용자 프로그램으로 복귀**

## 이중모드 (Dual mode)

한 컴퓨터를 여러 사람이 동시에 사용 or 한 사람이 여러 개의 프로그램을 동시에 사용하는 환경       
한 사람이 전체 프로그램에 영향을 미칠 수 있으므로 특권 명령으로 권한을 제한 -> 컴퓨터 시스템 보호       
*특권 명령: STOP, HALT, RESET, SET_TIMER, SET_HW ...*

> **사용자(user) 모드**       
  **관리자(Supervisor or System) 모드**
  
**플래그** : 레지스터에 모드를 나타냄
> 운영체제 서비스 실행 : *관리자 모드*       
  사용자 프로그램 실행 : *사용자 모드*       
  HW/ SW 인터럽트 발생 : *관리자 모드*       
  운영체제 서비스 종료 : *사용자 모드*       

### 하드웨어 보호

> 입출력장치 보호    
  메모리 보호    
  CPU 보호

#### 입출력장치 보호

사용자의 잘못된 입출력 명령으로 다른 사용자의 입출력, 정보 등에 방해하는 문제 방지
> **입출력 명령을 특권명령으로 제어 : IN, OUT**       
  IN : 입력장치로부터 정보를 받아들임       
  OUT : 출력장치에 명령               
  **운영체제가 입출력 대행**      
  입출력 실행 시 System mode      
  입툴력 종료 시 User mode      
  올바른 요청이 아니라면 운영체제가 거부

#### 메모리 보호

다른 사용자 메모리 or 운영체제 영역 메모리에 접근하는 문제 방지
> **MMU를 통한 메모리 영역 침범 감시**         
  MMU의 특권 명령은 운영체제만 바꿀 수 있음
  
#### CPU 보호

한 사용자가 CPU 시간을 독점하여 다른 사용자가 실행 못하는 문제 방지         
> **Timer을 통한 강제 타이머 인터럽트**       
인터럽트를 통해 운영체제가 다른 프로그램으로 강제 전환한다.

## 운영체제 서비스

> 프로세스 관리      
  주기억장치 관리      
  파일 관리      
  보조기억장치 관리     
  입출력장치 관리       
  네트워킹      
  보호
  
### 프로세스 관리

프로세스 : 메모리에서 실행 중인 프로그램

- 프로세스의 생성, 소멸
- 프로세스 활동 일시 중지, 활동 재개
- 프로세스간 통신
- 프로세스간 동기화
- 교착상태 처리

### 주기억장치 관리

- 프로세스에게 메모리 공간 할당
- 메모리의 어느 부분이 어느 프로세스에 할당되었는가 추적, 감시
- 프로세스 종료 시 메모리 회수
- 메모리의 효과적 사용
- 가상 메모리 : 물리적 실제 메모리보다 큰 용량 작업 수행

### 파일 관리

파일 : Track/Sector로 구성된 디스크의 논리적 관점 접근

- 파일의 생성, 삭제
- 디렉토리(=폴더)의 생성, 삭제
- 기본동작 지원 : open, close, read write, create, delete
- Track/Sector-file 간의 매핑
- 백업

### 보조기억장치 관리

- 빈 공간 관리
- 저장공간 할당
- 디스크 스케쥴링 : 데이터 읽는 시간 단축

### 입출력장치 관리

- 장치 드라이브
- 입출력장치 성능향상

### 시스템 콜

운영체제 서비스를 받기 위한 호출

> **Process**    
  end, abort, load, execute, create, terminate, get/set, atributes, wait event, signal event      
  **Memory**       
  allocate, free       
  **File**        
  create, delete, open, close, read, write, get/set atributes    
  **Device**    
  request, release, read, write, get/set atributes, atach/detache devices       
  **Information**      
  get/set ime, get/set system data     
  **Communication**     
  socket, send, receive
  
  


